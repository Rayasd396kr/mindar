<!DOCTYPE html>
<html>
<head>
    <title>ar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@v0.81.1/dist/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
    

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src='https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js'></script>
    <script src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js'></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.81.1/dist/L.Control.Locate.min.js" charset="utf-8"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet-polylinedecorator"></script>
    
    

    <style>
        .hidden {
            display: none;
        }
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        input[type="text"] {
            font-size: 16px; 
        }
        
        #map-container {
            position: fixed;
            width: 100%;
            height: 40%; 
            bottom: 0;
            left: 0;
            z-index: 999;
            overflow: hidden; 
            display: block;
        }

        #map {
            width: 100%;
            height: 100%; 
        }

       
        /* .hand-icon {
            position: fixed;
            top: 185px;  
            left: 50px; 
            z-index: 2000;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 18px;
            color: #c73d3d; 
            animation: click-animation 1.5s infinite;
            
        }

        @keyframes click-animation {
            0%, 100% { 
                transform: translate(-50%, -50%) scale(1) rotate(-45deg); 
                opacity: 1;
            }
            10% { 
                transform: translate(-50%, -50%) scale(1.1) rotate(-45deg); 
                opacity: 0.9;
            }
            30% {
                transform: translate(-50%, -50%) scale(0.9) translateY(10px) rotate(-45deg); 
                opacity: 0.7;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1) rotate(-45deg); 
                opacity: 1;
            }
        } */
        /* 地圖按鈕 */
        .map-toggle-icon {
            position: fixed;
            top: 220px;  
            right: 10px; 
            z-index: 1000;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            transition: background-color 0.3s, color 0.3s; 
            width: 25px; 
            height: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
        }
        .info-toggle-icon {
            position: fixed;
            top: 220px;  
            right: 10px; 
            z-index: 1000;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            transition: background-color 0.3s, color 0.3s; 
            width: 25px; 
            height: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .toggle-info-window {
            position: fixed;
            top: 220px;  
            left: 10px; 
            z-index: 1001;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            width: 25px; 
            height: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .toggle-info-window.active {
            background-color: #a49d9d; 
            color: white; 
        }
        .toggleStamp{
            position: fixed;
            top: 160px;  
            left: 10px; 
            z-index: 1001;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            width: 25px; 
            height: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .searchIcon{
            position: fixed;
            top: 100px;  
            left: 10px; 
            z-index: 1001;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 24px;
            width: 25px; 
            height: 25px; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
       

        .button-container-search {
            display: flex;
            width: 100%;
        }

        .button-container-search button {
            flex: 1;
            margin: 0;
            padding: 5px 0;
            border: none;
            color: black;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
        }
        .button-container-search-button {
            background-color: rgba(0, 0, 0, 0.251);
            border: none;
            cursor: pointer;
        }

        .button-container-search-button.active {
            background-color: #fff;
        }
        .button-container-search-button1.active {
            background-color: #fff;
            border-radius: 5px 0 0 0;
        }
        .button-container-search-button3.active {
            background-color: #fff;
            border-radius: 0 5px 0 0;
        }
        .search-box {
            width: 235px;
            display: none;
            position: absolute;
            top: 100px; 
            left: 70px; 
            border: none;
            border-radius: 5px;
            background-color: #fff;
            z-index: 1001;
        }

        .search-box input {
            width: 85%;
            padding: 5px;
            margin: 0 5%;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .search-box.hidden {
            display: none;
        }
       
        .search-box p {
            margin: 10px 10px;
        }

        #deleteMarkerButton{
            background-color: rgba(0, 0, 0, 0.251);
            border-radius: 5px;
            color: black;
            padding: 5px;
            margin: 10px;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
        }
        .dropdownMenu{
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 90%;
            padding: 5px;
            margin: 0 5%;
            font-size: 16px;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            position: fixed;
            top: 100px;
            left: 180px;
            transform: translateX(-50%);
            z-index: 1005;
            align-items: center;
            justify-content: center;
            text-align: center;
            background-color: white;
            border-radius: 5px;
            padding: 20px;
        }

        .grid-item {
            background-color: white;
            text-align: center;
            padding: 20px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        .grid-header {
            grid-column: span 3; 
            text-align: center;
            font-weight: bold;
            font-size: 20px; 
            margin-bottom: 10px; 
        }
        .grid-buttom{
            background-color: rgba(128, 128, 128, 0.247);
            grid-column: span 3; 
            border-radius: 5px;
            color: black;
            padding: 5px;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            border: none;
            margin-top: 10px;
            font-size: 16px; 
        }

        .custom-div-icon {
            text-align: center;
            font-size: 15px;
        }
        .custom-div-icon .circle {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 15px;
            height: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #000;
            margin-bottom: 2px;
        }
        .custom-div-icon .text {
            position: relative;
            left: -15px;
        }
        .building-name {
            font-size: 14px;
            position: relative;
            left: -25px;
        }
        .info-window {
          position: fixed;
          top: 15%;
          left: 50%;
          display: none;
          z-index: 1000;
          box-sizing: border-box;
        }
        
        .info-item {
          display: block; 
          background-color: rgba(224, 69, 69, 0.868);
          padding: 5px 10px;
          margin-bottom: 10px;
          max-width: fit-content;
          border-radius: 5px;
          animation: pulse 1s infinite;
          
        }
        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, 0) scale(1); 
            }
            50% {
                transform: translate(-50%, 0) scale(1.05); 
            }
        }

        .info-item p{
          width: auto;
          margin: 0px;
          text-align: center;
          color: white;
          font-size: bold;
        }
      
        .fa-exclamation{
          font-style: 20px;
          color: yellow;
          border-radius: 50%;
          margin-right: 10px;
        }
        .location-dot2{
          margin-left: 10px;
        }
        .custom-info-window {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); 
            width: 80%;
            z-index: 1999;
            display: none;
            /* padding: 5px;  */
            background-color: transparent; 
            /* border: #0000005a 1px solid; */
            border-radius: 5px; 
        }

        #info-image {
            width: 100%;
            height: auto;
            border-radius: 10px;
            object-fit: contain; 
            object-position: center; 
            border: 4px solid #000;
        }
        #info-close-button {
            position: absolute;
            top: 0px;
            right: 0px;
            background-color: transparent;
            border: none;
            font-size: 50px;
            cursor: pointer;
            color: white; 
            z-index: 1001;
        }
        .overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            border-radius: 10px;
            width: 70%;
            height: 50%;
            background-color: rgba(234, 234, 234, 0.663);
            display: flex;
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            padding: 10px;
        }
        #info-title{
            color: black;
            font-size: 24px;
            margin: 0;
            flex: 0 1 20%;
            display: flex;
            align-items: center; 
            justify-content: center; 
        }
        #info-text {
            color: black;
            font-size: 18px;
            margin: 0;
            flex: 0 1 60%;
        }
        #info-description{
            color: black;
            font-size: 18px;
            margin: 0;
            flex: 0 1 60%;
        }
        .button-container {
            display: flex; 
            justify-content: center; 
        }

        #info-button1, #info-button2 {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
            display: inline-block; 
            margin-right: 10px; 
        }

        #info-button2 {
            margin-right: 0; 
        }





        .button-container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            position: fixed;
            top: 10px;
            width: 100%;
            overflow-x: auto;
            z-index: 1001;
            white-space: nowrap;
            padding: 10px 0;
            box-sizing: border-box;
        }
        .button-container button {
            margin: 0 10px;
            padding: 10px 20px;
            border: none;
            background-color: #6296bc93;
            color: white;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            flex-shrink: 0;
        }
        .button-container::-webkit-scrollbar {
            display: none;
        }
        /* 地圖放大 */
        .zoom-button {
            position: absolute;
            bottom: 60px;
            right: 10px;
            z-index: 1000;
            background-color: #307fb7;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 16px;
            display: none;
        }
        
        .swiper-container {
            position: absolute;
            bottom: 140px;
            right: 0px;
            width: 100%;
            height: 60vh;
            background-position: center;
            background-size: cover;
            border-radius: 10px;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1501;
        }

        .swiper-slide {
            position: relative;
            border:solid 3px #000;
            border-radius: 10px;
            background: rgb(175, 206, 216);
            background-size: cover;
            background-position: center;
            width: 80%;
        }

        .swiper-slide .slide-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        .swiper-slide img {
            margin: 0 20px 0 20px !important; 
            border-radius: 30px 30px 0 0;
            display: block;
            width: 85%;
            max-height: 60%; 
            
        }
        .slide-background {
            width: 85%;
            border-radius: 0 0 10px 10px;
            background-color: #ffffffb4;
            height: 25%;
            display: flex;
            flex-direction: column;
            
        }

        .slide-title {
            border: solid 3px black;
            border-radius: 20px;
            background-color: white;
            margin: 0px !important;
            color: balck;
            display: flex;
            align-items: center;
            text-align: center;
            justify-content: center;
            padding: 5px;
            font-weight: bold;
            
        }

        .slide-text {
            margin: 0px !important;
            color: black;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 10px;
            font-size: 14px;
        }
        .fa-camera-retro{
            position: absolute;
            bottom: 180px;
            right: 35px;
            padding: 10px;
            font-size:30px;
            color: white;
            background-color: #ce5252;
            cursor: pointer;
            border-radius: 50px;
        }
        .location-dot1{
            position: absolute;
            bottom: 250px;
            right: 35px;
            padding: 10px;
            font-size:30px;
            color: white;
            background-color: #527bce;
            cursor: pointer;
            border-radius: 50px;
        }
        .fa-number{
            position: absolute;
            bottom: 6px;
            right: 10px;
            font-size:24px;
            color: black;
            cursor: pointer;
        }
        .close-btn {
            position: absolute;
            top: 0px;
            right: 10px;
            font-size:40px;
            color: black;
            cursor: pointer;
        }
        
        button.active {
            background-color: #307fb7;
        }
        

        .info-box {
            display: inline-block;
            flex: 0 0 70%;
            margin: 0 10px;
            padding: 10px;
            background-color: #c3bebe;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            z-index: 1000;
            scroll-snap-align: center;
            
        }
        .info-container1 {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 100%;
            height: 20vh;
            border-radius: 10px;
            background-color: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
            display: none;
        }
        .infoslide {
            background-color: rgba(228, 222, 222, 0.875);
            border-radius: 5px;
            text-align: center;
            height: 20vh;
            padding: 10px;
            box-sizing: border-box;
            margin: 10px;
            display: flex;
            flex-direction: row; 
            align-items: center; 
            width: 100%;
        }
        .infoslide-img {
            width: 40%;
            height: 100%;
            display: flex;
            object-fit: cover;
            align-items: center;
            justify-content: center;
            border-top-left-radius: 5px;
            border-bottom-left-radius: 5px;
            float: left;
        }
        .infoslide-content {
            width: 60%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.752);
        }
        .infoslide-title {
            font-size: 1.5em;
            margin-bottom: 10px;
            flex: 0 1 10%;
        }
        .infoslide-text {
            font-size: 1em;
            margin-bottom: 10px;
            height: 80%;
        }
        .infoslide-button {
            align-self:center;
            flex: 0 1 10%; 
        }
        .highlight-text {
            color: red;
        }
        .scene-container {
            position: fixed; 
            top: 0px;
            left: 0px;
            width: 800px;
            height: 600px;
            
        }
        /* 相機畫面關閉按鈕 */
        .close-button {
            position: absolute;
            top: 20px;
            right: 200px;
            background-color: rgba(255, 255, 255, 0.752);
            color: black;
            border: none;
            padding: 10px;
            cursor: pointer;
            z-index: 1000; 
            display: none;
        }

        .onclick-button {
            position: fixed;
            top: 200px;  
            left: 5px; 
            z-index: 1001;
            cursor: pointer;
        }
        
        /* .leaflet-control-locate {
            position: fixed;
            top: 150px;  
            left: 5px; 
            z-index: 2000;
            cursor: pointer;
        } */
        /* 將容器置中 */
        #customButtonContainer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70%;
            padding: 20px;
            z-index: 3000;
            background-color: white;
            color: black;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.59);
            text-align: center; /* 將容器內部元素置中 */
        }

        /* 按鈕樣式 */
        #customButton {
            padding: 10px;
            background-color: #b74834;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }


        /* 標題和文字 */
        #customButtonContainer h2{
            margin-top: 0px;
        }
        #customButtonContainer p {
            margin: 10px 0;
        }
        #text-entity {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        @keyframes bounce {
            0%, 100% {
                transform: scale(5);
            }
            50% {
                transform: scale(7);
            }
        }

        .bouncing-icon img {
            animation: bounce 1s infinite;
        }

        
       
        


        
       
    </style>

</head>
<body>
    <div class="button-container">
        <button onclick="toggleMarkers('navigation')" class="active">導覽路線</button>
        <button onclick="toggleMarkers('sports')">運動場</button>
        <button onclick="toggleMarkers('events')">活動</button>
        <button onclick="toggleMarkers('events')">活動</button>
    </div>
    <div class="scene-container" id="scene-container" style="z-index: 999;">
        <a-scene arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' renderer='antialias: true; alpha: true'>
            <a-assets>
                <!-- <video id="penguin-sledding" autoplay loop="true" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/girl.mov"></video> -->
                <img id="my-image" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/man.png">
            </a-assets>
            <a-camera cursor="fuse: false; rayOrigin: mouse;" raycaster="far: ${customFields.libVersion}; objects: .clickable">
                <a-entity id="box-container" position="0.25 0.55 -1">
                    <a-image src="#my-image" 
                    position="0 0 0" 
                    width="0.4" 
                    height="0.4" 
                    rotation="0 0 0"></a-image>
                    <!-- <a-video src="#penguin-sledding" 
                        position="0 0 0" 
                        width="0.3" 
                        height="0.2" 
                        rotation="0 0 0">
                    </a-video> -->
                    <a-entity position="0 -0.2 0">
                        <!-- 背景平面 -->
                        <a-plane 
                            position="0 0 0.01" 
                            width="0.3" 
                            height="0.1" 
                            color="black">
                        </a-plane>
                        <!-- 文字 -->
                        <a-entity 
                            id="text-entity"
                            position="0 0 0.02" 
                            text="value: talk; align: center; width: 1; color: white;">
                        </a-entity>
                    </a-entity>
                </a-entity>
            </a-camera>
            <!-- <a-entity material='color: green' position="0 1 -3" geometry='primitive: box'></a-entity> -->
            <a-assets>
                <!-- <a-asset-item id="my-model" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/bluenew.glb"></a-asset-item> -->
            </a-assets>
            <a-entity id="dynamic-entity" gltf-model="#my-model" position="1 1 0" scale="0.5 0.5 0.5" visible="false"></a-entity>
            <a-entity id="text-box" position="0 0 -3" visible="false">
                <a-plane color="#FFFFFF" width="3" height="0.5" position="0 0.7 0"></a-plane>
                <a-text id="info-text" font="" value="introduce" color="#000000" align="center" position="0 0.7 0.1" negate="false"></a-text>
                <a-plane id="toggle-button" color="#CCCCCC" width="1" height="0.5" position="0 0 0" class="clickable">
                    <a-text value="Ok" color="#000000" align="center" position="0 0 0.1"></a-text>
                </a-plane>
            </a-entity>
        </a-scene>
    </div>
    
    <!-- <i class="fa-solid fa-map-location-dot map-toggle-icon" aria-hidden="true" onclick="toggleMap()"></i> -->
    <!-- <i class="fa-solid fa-tag info-toggle-icon" id="toggle-info-window" aria-hidden="true" ></i> -->
    <i class="fa-solid fa-file-lines toggle-info-window" id="toggle-info-window" aria-hidden="true" onclick="toggleinfo1()" ></i>
    <i class="fa-solid fa-stamp stamp-icon toggleStamp" id="toggleStamp" aria-hidden="true" onclick="toggleGrid()"></i>
    <i class="fa-solid fa-search searchIcon" id="searchIcon" aria-hidden="true" onclick="toggleSearchBox()"></i>
    <div id="customButtonContainer">
        <h2>使用說明</h2>
        <p>適用於校園環境中</p>
        <button id="customButton"><i class="fa-solid fa-location-dot"></i>&nbsp;定位</button>
    </div>
    
    <div id="searchBox" class="search-box hidden">
        <div class="button-container-search">
            <button class="button-container-search-button button-container-search-button1 active" onclick="updateContent('id', this)">編號</button>
            <button class="button-container-search-button" onclick="updateContent('office', this)">處室</button>
            <button class="button-container-search-button button-container-search-button3" onclick="updateContent('department', this)">系辦</button>
        </div>
        <br>
        <div id="content-id" class="content-div">
            <input type="text" id="searchInput" placeholder="輸入教室編號，例：2402">
            <p id="buildingName">大樓：</p>
            <p id="floor">樓層：</p>
            <p id="id">編號：</p>
            <p id="deleteMarkerButton" onclick="deleteMarkers()">刪除標記</p>
        </div>
        
        
        <div id="content-office" class="content-div hidden">
            <select id="dropdownMenu-office" class="dropdownMenu" onchange="updateOffice()">
                <option value="" selected disabled>請選擇處室</option>
                <option value="office01">註冊組</option>
                <option value="office02">課務組</option>
                <option value="office03">教學資源中心</option>
                <option value="office04">綜合業務組</option>
                <option value="office05">通識中心</option>
                <option value="office06">語言中心</option>
                <option value="office07">出納組</option>
                <option value="office08">事務組</option>
                <option value="office09">校務資訊組</option>
                <option value="office10">網路工程組</option>
                <option value="office11">教學資訊組</option>
                <option value="office12">諮商輔導組</option>
                <option value="office13">課外活動指導組</option>
                <option value="office14">生活輔導組</option>
                <option value="office15">學生宿舍組</option>
                <option value="office16">衛生保健組</option>
                <option value="office17">健康中心</option>
                <option value="office18">實習與就業輔導組</option>
                <option value="office19">服務學習輔導組</option>
            </select>
            <p id="buildingName-office">大樓：</p>
            <p id="floor-office">樓層：</p>
            <p id="id-office">編號：</p>
            <p id="deleteMarkerButton" onclick="deleteMarkers()">刪除標記</p>
        </div>        
        <div id="content-department" class="content-div hidden">
            <select id="dropdownMenu-department" class="dropdownMenu" onchange="updateDepartment()">
                <option value="" selected disabled>請選擇系所</option>
                <option value="department01" disabled>商學院</option>
                <option value="department02">國際貿易與經營系</option>
                <option value="department03">會計資訊系</option>
                <option value="department04">保險金融管理系</option>
                <option value="department05">企業管理系</option>
                <option value="department06">財政稅務系</option>
                <option value="department07">財務金融系</option>
                <option value="department08">休閒事業經營系</option>
                <option value="department09">應用統計系</option>
                <option value="department10" disabled>設計學院</option>
                <option value="department11">商業設計系</option>
                <option value="department12">多媒體設計系</option>
                <option value="department13">室內設計系</option>
                <option value="department14">創意商品設計系</option>
                <option value="department15" disabled>資訊與流通學院</option>
                <option value="department16">資訊管理系</option>
                <option value="department17">資訊工程系</option>
                <option value="department18">流通管理系</option>
                <option value="department19">人工智慧應用工程</option>
                <option value="department20" disabled>語文學院</option>
                <option value="department21">應用英語系</option>
                <option value="department22">應用日語系</option>
                <option value="department23">應用中文系</option>
                <option value="department24" disabled>智慧產業學院</option>
                <option value="department25">商業經營系</option>
                <option value="department26">智慧生產工程系</option>
            </select>
            <p id="buildingName-department">大樓：</p>
            <p id="floor-department">樓層：</p>
            <p id="id-department">編號：</p>
            <p id="deleteMarkerButton" onclick="deleteMarkers()">刪除標記</p>
        </div>
    </div>
    
    <div id="grid-container" class="grid-container" style="display: none;">
        <div class="grid-header">集點</div>
        <div id="cell-1" class="grid-item">1</div>
        <div id="cell-2" class="grid-item">2</div>
        <div class="grid-item">3</div>
        <div class="grid-item">4</div>
        <div class="grid-item">5</div>
        <div class="grid-item">6</div>
        <div class="grid-item">7</div>
        <div class="grid-item">8</div>
        <div class="grid-item">9</div>
        <button class="grid-buttom" id="grid-buttom"><i class="fas fa-stamp"></i>集點卡</button>
        <!-- <button onclick="resetLocalStorage()">重置</button> -->
    </div>
    <div id="map-container">
        <div id="map">
            <i class="fa fa-expand zoom-button" aria-hidden="true" onclick="toggleFullScreen()"></i>
            <i class="fa-solid fa-hand-pointer hand-icon" aria-hidden="true" id="hand-icon"></i>
        </div>
    </div>
    
    <div id="info-window" class="info-window">
      <div id="info-list">
      </div>
  </div>  
  <div id="custom-info-window" class="custom-info-window">
            <img id="info-image" src="" />
            <button id="info-close-button">&times;</button>
            <div class="overlay">
                <p id="info-title"><strong>標題</strong></p>
                <p id="info-description">文字</p>
                <div class="info-button-container">
                    <!-- <button id="info-button1">定位</button> -->
                    <button id="info-button2">掃描</button>
                </div>
            </div>
    </div>

    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl-1.png" />
                    <i class="fa-solid fa-location-dot location-dot1"></i>
                    <div class="slide-background">
                        <p class="slide-title">1.資訊館一樓內部</p>
                        <p class="slide-text">此處位於資訊樓電梯旁邊，有一台關於學生影印相關文件的機器，還有冷氣儲值機。</p>
                    </div>
                    <i class="fa-solid fa-1 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-2 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-3 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-4 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-5 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-6 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-7 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-8 fa-number"></i>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="slide-content">
                    <span class="close-btn">&times;</span>
                    <img class="slide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
                    <div class="slide-background">
                        <p class="slide-title">資管四樓某地方</p>
                        <p class="slide-text">此處是資管大本營，每個資管人都在此上過課，培養出很多優秀人才。</p>
                    </div>
                    <i class="fa-solid fa-9 fa-number"></i>
                </div>
            </div>
            
        </div>
    </div>
    <div class="info-container1">
        <div class="infoslide">
            <img class="infoslide-img" src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    1.資訊樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    2.中正樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    3.活動中心
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    4.昌明樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    5.翰英樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    6.中商大樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    7.女宿
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    7.男宿
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    8.奇秀樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
               
            </div>
        </div>
        <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    9.弘業樓
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div>
        <!-- <div class="infoslide">
            <img class="infoslide-img" src="https://swiperjs.com/demos/images/nature-3.jpg" />
            <div class="infoslide-content">
                <div class="infoslide-title">
                    home
                </div>
                <div class="infoslide-text">
                    描述
                </div>
                
            </div>
        </div> -->
    </div>
   
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
        $(document).ready(function(){
            $('.info-container1').slick({
                centerMode: true,
                centerPadding: '60px',
                slidesToShow: 3,
                responsive: [
                    {
                    breakpoint: 768,
                    settings: {
                        arrows: false,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 3
                    }
                    },
                    {
                    breakpoint: 480,
                    settings: {
                        arrows: false,
                        centerMode: true,
                        centerPadding: '40px',
                        slidesToShow: 1
                    }
                    }
                ]
            });

            
            $('.info-container1').on('afterChange', function(event, slick, currentSlide){
                if(currentType === 'navigation') {
                    updateNavigationMarkers(currentSlide);
                }
            });

            
            if ($('.info-container1').slick('slickCurrentSlide') === 0 && currentType === 'navigation') {
                updateNavigationMarkers(0);
            }
        });

        function updateNavigationMarkers(currentSlide) {
            currentMarkers.eachLayer(function(layer) {
                var textElement = layer.options.icon.options.html.match(/data-index='(\d+)'/);
                if (textElement && parseInt(textElement[1]) === currentSlide) {
                    layer.setIcon(L.divIcon({
                        className: 'custom-div-icon',
                        html: `<div class='circle'>${locations['navigation'][currentSlide].circle}</div><div class='text highlight-text' data-index='${currentSlide}'>${locations['navigation'][currentSlide].name}</div>`,
                        iconSize: [50, 50],
                        iconAnchor: [15, 0]
                    }));
                } else {
                    var index = textElement ? parseInt(textElement[1]) : null;
                    layer.setIcon(L.divIcon({
                        className: 'custom-div-icon',
                        html: `<div class='circle'>${locations['navigation'][index].circle}</div><div class='text' data-index='${index}'>${locations['navigation'][index].name}</div>`,
                        iconSize: [50, 50],
                        iconAnchor: [15, 0]
                    }));
                }
            });
        }


    </script>

    <script>
         
        var map = L.map('map', { zoomControl: false }).setView([24.150996625919188, 120.68148734742584], 17);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        var markerLayer = L.layerGroup().addTo(map);
        
        const points = [
            { lat: 24.149777480517585, lng: 120.68385171379057, message: '請前往第一個標示點', font: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/text1-msdf.json' },
            { lat: 24.149936946350714, lng: 120.68321904749284, message: '請前往第二個標示點', font: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/text2-msdf.json' },
            { lat: 24.150896625919188, lng: 120.68148734742584, message: 'go to 3' },
        ];

        let currentPointIndex = 0;
        let currentMarker = null;

        const customIcon1 = L.divIcon({
            className: 'bouncing-icon',
            html: '<img src="https://raw.githubusercontent.com/Rayasd396kr/ar/main/redbutton.png" style="width: 5px; height: 5px;"  />',
            iconSize: [5, 5],
            iconAnchor: [0, 0],
        });

        function updateMarkerAndText() {
            if (currentMarker) {
                map.removeLayer(currentMarker);
            }

            const currentPoint = points[currentPointIndex];
            currentMarker = L.marker([currentPoint.lat, currentPoint.lng], { icon: customIcon1 }).addTo(map);
            const textEntity = document.querySelector('#text-entity');
            textEntity.setAttribute('text', 'value', currentPoint.message);
            textEntity.setAttribute('text', 'font', currentPoint.font);
            textEntity.setAttribute('text', 'negate', 'false');
        }

        function updateTextIfNear(lat, lng) {
            const currentPoint = points[currentPointIndex];
            const distance = calculateDistance(lat, lng, currentPoint.lat, currentPoint.lng);

            if (distance < 10) { // 设定范围，例如 50 米
                currentPointIndex++;
                if (currentPointIndex < points.length) {
                    updateMarkerAndText();
                } else {
                    document.querySelector('#text-entity').setAttribute('text', 'value', 'done！');
                }
            }
        }

        // 计算两点之间的距离（使用 Haversine 公式）
        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371000; // 地球半径，单位为米
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;

            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLng / 2) * Math.sin(dLng / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

            return R * c; // 返回距离，单位为米
        }

        // 获取用户位置并更新文本
        navigator.geolocation.watchPosition(position => {
            const { latitude, longitude } = position.coords;
            updateTextIfNear(latitude, longitude);
        }, error => {
            console.error('Error getting location:', error);
        });

        updateMarkerAndText();

       
        var infoWindow = document.getElementById('info-window');
        

        var locations = {
            navigation: [
                { circle: "1", name: "行政&資訊樓", coords: [24.14961330934904, 120.68364591589136], image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png', title: '行政&資訊樓', description: '行政&資訊樓的描述', buttonText: '集點', slideIndex: 0  },
                { circle: "2", name: "中正樓", coords: [24.14960142559353, 120.68333783333679], image: '', title: '中正樓', description: '中正樓的描述', buttonText: '集點', slideIndex: 1},
                { circle: "3", name: "活動中心", coords: [24.15002756948417, 120.68259788356026], image: '', title: '活動中心', description: '活動中心的描述', buttonText: '了解更多' },
                { circle: "4", name: "昌明樓", coords: [24.150397919894687, 120.68298858486425] },
                { circle: "5", name: "翰英樓", coords: [24.151290909932047, 120.68315169317616] },
                { circle: "6", name: "中商大樓", coords: [24.15123377909032, 120.68217149067684] },
                { circle: "7", name: "宿舍(女)", coords: [24.151830165086253, 120.68329357159718] },
                { circle: "7", name: "宿舍(男)", coords: [24.15157844348967, 120.68410448132035] },
                { circle: "8", name: "奇秀樓", coords: [24.151224781813994, 120.68397935752898] },
                { circle: "9", name: "弘業樓", coords: [24.1505058854478, 120.68404953097337] },
                // { circle: "10", name: "home", coords: [24.150996625919188, 120.68148734742584], image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png', title: 'home', description: '家的描述', buttonText: '集點', slideIndex: 2, toggleScene: true  },
            ],
           
            
            sports: [
                { circle: "2", name: "有氧教室", coords: [24.149419286183875, 120.68358285379435], icon: 'fa-dumbbell', image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png', title: '行政&資訊樓', description: '行政&資訊樓的描述', buttonText: '集點', slideIndex: 0  },
                { circle: "", name: "羽球場", coords: [24.149991580590665, 120.68249043909975], icon: 'fa-futbol', image: 'https://example.com/image3.jpg', title: '活動中心', description: '活動中心的描述', buttonText: '了解更多' },
                { circle: "4", name: "撞球室", coords: [24.151224781813994, 120.68397935752898], icon: 'fa-pool' },
                { circle: "", name: "健身房、飛鏢室", coords: [24.151830165086253, 120.68329357159718], icon: 'fa-dumbbell' },
                { circle: "8", name: "桌球場", coords: [24.1508525821429, 120.68363722461531], icon: 'fa-table-tennis' },
                { circle: "6", name: "體育館(籃球、羽球)", coords: [24.150625562016405, 120.6837616229793], icon: 'fa-basketball-ball' },
                { circle: "6", name: "籃球場", coords: [24.150558620102444, 120.68259100233186], icon: 'fa-basketball-ball' },
                { circle: "6", name: "排球場", coords: [24.15027629948941, 120.6824761730654], icon: 'fa-volleyball-ball' },
                { circle: "6", name: "排球場", coords: [24.15099519715003, 120.682922731372], icon: 'fa-volleyball-ball' },
                { circle: "6", name: "排球場", coords: [24.151501624643654, 120.68313963110252], icon: 'fa-volleyball-ball' },
                { circle: "6", name: "操場、網球場", coords: [24.151143633002647, 120.68336291023688], icon: 'fa-baseball' },
                { circle: "6", name: "棒球場", coords: [24.150908466450176, 120.68391374262593], icon: 'fa-baseball-ball' },

            ],
            events: [
                {name: "花園廣場", coords: [24.150189393858057, 120.68364282259014], icon: 'fa-tree'},
                {name: "活動場", coords: [24.15073843132668, 120.68389874894474], icon: 'fa-archway'},
                {name: "小市集", coords: [24.150548039925443, 120.68376833473943], icon: 'fa-cart-shopping'},
                {name: "演唱廳", coords: [24.149989661189462, 120.68248604134148], icon: 'fa-music'},

            ]
        };
        var pointsOfInterest = {
            navigation: [
                { name: "集點", 
                  coords: [24.150996625919188, 120.68148734742584],
                  image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl-1.png',
                  title: '自助機器',
                  description: "位於資訊樓1樓電梯左側，左邊是自動繳費機，右邊是自動加值跟儲值機，有需求的同學可前往使用。請至此集點處AR掃描~"
                },
                { name: "大樓", 
                  coords: [24.150996625919188, 120.68148734742584],
                  image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png',
                  title: '行政&資訊樓',
                  description: "找到大樓啦~請至此處看板AR掃描看看會發生什麼事???"
                },
                { name: "集點", 
                  coords: [24.14971330934904, 120.68364591589136],
                  image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl-1.png',
                  title: '自助機器',
                  description: "位於資訊樓1樓電梯左側，左邊是自動繳費機，右邊是自動加值跟儲值機，有需求的同學可前往使用。請至此集點處AR掃描~"
                },
                { name: "大樓", 
                  coords: [24.14971330934904, 120.68364591589136],
                  image: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/zcl.png',
                  title: '行政&資訊樓',
                  description: "找到大樓啦~請至此處看板AR掃描看看會發生什麼事???"
                },
                
            ]
        };
        var currentMarkers;
        var navigationRoute; 
        var navigationArrows = [];
        var navigationLines = []; 
        document.addEventListener('DOMContentLoaded', function() {
            toggleMarkers('navigation');
            
        });
        let currentType = '';

        function toggleMarkers(type) {
            if (currentMarkers) {
                markerLayer.removeLayer(currentMarkers);
            }

            currentMarkers = L.layerGroup().addTo(markerLayer);
            currentType = type;

            locations[type].forEach((location, index) => {
                let iconOptions;

                switch (type) {
                    case 'navigation':
                        iconOptions = {
                            className: 'custom-div-icon',
                            html: `<div class='circle'>${location.circle}</div><div class='text' data-index='${index}'>${location.name}</div>`,
                            iconSize: [50, 50],
                            iconAnchor: [15, 0]
                        };
                        break;
                    
                    case 'sports':
                        iconOptions = {
                            className: 'sports-marker',
                            html: `
                                <div class='building-icon'>
                                    <i class='fa-solid ${location.icon} building-icon'></i>
                                </div>
                                <div class='building-info'>
                                    <div class='building-name'>${location.name}</div>
                                </div>`,
                            iconSize: [100, 50],
                            iconAnchor: [0, 0]
                        };
                        break;
                    case 'events':
                        iconOptions = {
                            className: 'event-marker',
                            html: `
                                <div class='building-icon'>
                                    <i class='fa-solid ${location.icon} building-icon'></i>
                                </div>
                                <div class='building-info'>
                                    <div class='building-name'>${location.name}</div>
                                </div>`,
                            iconSize: [100, 50],
                            iconAnchor: [0, 0]
                        };
                        break;
                    default:
                        iconOptions = {};
                        break;
                }

                var textMarker = L.divIcon(iconOptions);
                var marker = L.marker(location.coords, { icon: textMarker }).addTo(currentMarkers);
                marker.on('click', function() {
                    $('.info-container1').slick('slickGoTo', index);
                });
            });
            
            if (type === 'navigation') {
                drawNavigationRoute();
            } else {
                clearNavigationRoute();
            }
        }

        
        


        function drawNavigationRoute() {
            clearNavigationRoute(); 

           
            var latlngs = locations.navigation.map(location => location.coords);
            navigationRoute = L.polyline(latlngs, { color: 'gray', weight: 4 }).addTo(markerLayer);

            latlngs.forEach((latlng, index) => {
                if (index < latlngs.length - 1) {
                    var segment = [latlng, latlngs[index + 1]];

                    var line = L.polyline(segment, { color: 'gray', weight: 4 }).addTo(markerLayer);
                    navigationLines.push(line); 

                    var arrow = L.polylineDecorator(line, {
                        patterns: [
                            {
                                offset: '100%', 
                                repeat: 0, 
                                symbol: L.Symbol.arrowHead({
                                    pixelSize: 15, 
                                    polygon: false, 
                                    pathOptions: { color: 'gray', weight: 4 }
                                })
                            }
                        ]
                    }).addTo(markerLayer);

                    navigationArrows.push(arrow); 
                }
            });
        }

        function clearNavigationRoute() {
            if (navigationRoute) {
                markerLayer.removeLayer(navigationRoute);
                navigationRoute = null; 
            }
            if (navigationArrows.length > 0) {
                navigationArrows.forEach(arrow => markerLayer.removeLayer(arrow));
                navigationArrows = []; 
            }
            if (navigationLines.length > 0) {
                navigationLines.forEach(line => markerLayer.removeLayer(line));
                navigationLines = []; 
            }
        }





        const buttons = document.querySelectorAll('.button-container button');

        buttons.forEach(button => {
            button.addEventListener('click', function() {
                buttons.forEach(btn => btn.classList.remove('active'));

                this.classList.add('active');

                toggleMarkers(this.getAttribute('onclick').split("'")[1]);
            });
        });


        function clean() {
            if (markerLayer.getLayers().length > 0) {
                markerLayer.clearLayers(); 
            }
        }




        var lc = L.control.locate({
            setView: 'once',
            keepCurrentZoomLevel: true,
            drawCircle: true,
            follow: true, 
            showCompass: true,       
            compassHeading: true,     
            locateOptions: {
                enableHighAccuracy: true
            },
            initialZoomLevel: 20
        }).addTo(map);
        
        // lc.start();

        document.addEventListener('DOMContentLoaded', (event) => {
            const locationButton = document.querySelector('.leaflet-bar-part-single');
            const handIcon = document.getElementById('hand-icon');

            locationButton.addEventListener('click', () => {
                handIcon.style.display = 'none';
            });
        });
        document.addEventListener('DOMContentLoaded', (event) => {
            // 查找自定義按鈕
            const customButton = document.getElementById('customButton');

            // 查找 Leaflet 定位控制按鈕
            const locateButton = document.querySelector('.leaflet-control-locate a');

            // 查找容器
            const customButtonContainer = document.getElementById('customButtonContainer');

            if (customButton && locateButton && customButtonContainer) {
                // 綁定點擊事件
                customButton.addEventListener('click', () => {
                    locateButton.click();
                    customButtonContainer.style.display = 'none'; // 隱藏容器
                });
            } else {
                console.error('Cannot find customButton, locateButton, or customButtonContainer');
            }
        });



        let isManuallyClosed = false;

        var additionalMarkers = [
            { 
                name: "新位置1", 
                coords: [24.15022088767326, 120.68364978317109],
                title: '新位置1',
                description: "此處是花園廣場，會舉辦市集",
                font:"https://raw.githubusercontent.com/Rayasd396kr/ar/main/flower-msdf.json",
                modelUrl: "https://raw.githubusercontent.com/Rayasd396kr/ar/main/flower.glb",
                iconUrl: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/surprise.png' 
            },
            { 
                name: "新位置2", 
                coords: [24.151185377586177, 120.681473842995],
                title: '新位置2',
                description: "此處是花園廣場，會舉辦市集",
                font:"https://raw.githubusercontent.com/Rayasd396kr/ar/main/flower-msdf.json",
                modelUrl: "https://raw.githubusercontent.com/Rayasd396kr/ar/main/flower.glb",
                iconUrl: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/surprise.png' 
            },
            // { 
            //     name: "新位置3", 
            //     coords: [24.14961330934904, 120.68364591589136],
            //     title: '新位置3',
            //     description: "introduce3",
            //     modelUrl: "https://raw.githubusercontent.com/Rayasd396kr/ar/main/bluenew.glb",
            //     iconUrl: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png' 
            // },
            // { 
            //     name: "新位置4", 
            //     coords: [24.14971330934904, 120.68364591589136],
            //     title: '新位置4',
            //     description: "introduce4",
            //     modelUrl: "https://raw.githubusercontent.com/Rayasd396kr/ar/main/map.glb",
            //     iconUrl: 'https://raw.githubusercontent.com/Rayasd396kr/ar/main/web.png' 
            // },
        ];

        function createBox(content) {
            var entity = document.getElementById('dynamic-entity');
            entity.setAttribute('gltf-model', content.modelUrl);
            entity.setAttribute('position', content.position);
            entity.setAttribute('visible', 'true');
            
            var textBox = document.getElementById('text-box');
            var infoText = document.getElementById('info-text');
            infoText.setAttribute('value', content.text);
            infoText.setAttribute('font', content.font);
            textBox.setAttribute('visible', 'true');

            var mapContainer = document.getElementById('map-container');
            mapContainer.style.display = 'none';
        }

        function updateInfoWindow(latlng) {
            var infoWindow = document.getElementById('info-window');
            var infoList = document.getElementById('info-list');

            if (!infoWindow || !infoList) {
                console.error('Required elements are missing');
                return;
            }

            if (isManuallyClosed) {
                return;
            }

            // 计算距离并过滤出 50 米以内的点
            var nearbyLocations = [...Object.values(pointsOfInterest).flat()].filter(location => {
                var distance = map.distance(latlng, location.coords);
                console.log(`距离 ${location.name}：${distance} 米`);
                return distance < 30;
            }).map(location => ({
                location,
                distance: map.distance(latlng, location.coords)
            }));
            console.log(nearbyLocations);
            infoList.innerHTML = '';


            if (nearbyLocations.length > 0) {
                nearbyLocations.forEach(({ location, distance }) => {
                    var infoItem = document.createElement('div');
                    infoItem.className = 'info-item';
                    infoItem.innerHTML = `
                        <p><i class="fa-solid fa-exclamation"></i>發現${location.name}<i class="fa-solid fa-location-dot location-dot2"></i></p>
                    `;
                    infoItem.addEventListener('click', function() {
                        openCustomInfoWindow(location); 
                    });
                    infoList.appendChild(infoItem);
                });

                infoWindow.style.display = 'block';

                
                
            } else {
                infoWindow.style.display = 'none';
            }
        }
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(function(position) {
                var latlng = L.latLng(position.coords.latitude, position.coords.longitude);
                updateNearbyMarkers(latlng);
            }, function(error) {
                console.log('Error getting location: ', error);
            }, {
                enableHighAccuracy: true, // 启用高精度
                maximumAge: 10000, // 最大缓存时间
                timeout: 10000 // 最大等待时间
            });
        }

        function updateNearbyMarkers(latlng) {
            var additionalMarker = [];

            additionalMarkers.forEach(function(location) {
                var customIcon = L.icon({
                    iconUrl: location.iconUrl,
                    iconSize: [32, 32], // 设置图标大小
                    iconAnchor: [16, 32], // 设置图标锚点
                    popupAnchor: [0, -32] // 设置弹出窗口锚点
                });
                var distance = map.distance(latlng, location.coords);
                if (distance < 30) { // 如果距离小于 30 米
                    var marker = L.marker(location.coords, { icon: customIcon }).addTo(map);
                    additionalMarker.push(marker);

                    marker.on('click', function() {
                        var content = {
                            modelUrl: location.modelUrl,
                            position: '0 2 -3',
                            text: location.description,
                            font: location.font,
                        };
                        createBox(content);
                    });
                }
            });
        }

        document.getElementById('toggle-button').addEventListener('click', function() {
            var entity = document.getElementById('dynamic-entity');
            var textBox = document.getElementById('text-box');

            entity.setAttribute('visible', 'false');
            textBox.setAttribute('visible', 'false');

            var mapContainer = document.getElementById('map-container');
            mapContainer.style.display = 'block';
        });



        // <p>發現${location.name}目標物，距離${distance.toFixed(2)}公尺</p>
        function openCustomInfoWindow(location) {
            var customInfoWindow = document.getElementById('custom-info-window');
            var infoImage = document.getElementById('info-image');
            var infoTitle = document.getElementById('info-title');
            var infoDescription = document.getElementById('info-description');
            // var infoButton1 = document.getElementById('info-button1');
            var infoButton2 = document.getElementById('info-button2');


            infoImage.src = location.image || 'default-image.jpg'; 
            infoTitle.textContent = location.title;
            infoDescription.textContent = location.description;
             

            // infoButton1.onclick = function() {
            //     const infodistance = map.distance(userLatLng, location.coords);
            //     addinfoMarkerToMap(location.coords, location.title, infodistance);
            // };
            function addinfoMarkerToMap(coords, title, distance) {
                const marker = L.marker(coords).addTo(map);
                const popupContent = `
                    <div>
                        <h3>${title}</h3>
                        ${distance !== undefined ? `<p>距離: ${distance.toFixed(2)} 公尺</p>` : ''}
                    </div>
                `;
                marker.bindPopup(popupContent).openPopup();
            }

            infoButton2.onclick = function() {
                toggleScene();
            };

            
            customInfoWindow.style.display = 'block';
        }

        // document.getElementById('toggle-info-window').addEventListener('click', function() {
        //     var infoWindow = document.getElementById('info-window');
        //     if (infoWindow.style.display === 'none' || infoWindow.style.display === '') {
        //         infoWindow.style.display = 'block';
        //     } else {
        //         infoWindow.style.display = 'none';
        //         var closestLocation = Object.values(locations).flat().reduce((closest, location) => {
        //             var distance = map.distance(userLatLng, location.coords);
        //             return distance < closest.distance ? { location, distance } : closest;
        //         }, { distance: Infinity }).location;
                
        //         if (map.distance(userLatLng, closestLocation.coords) < 50) {
        //             isManuallyClosed = true;
        //         }
        //     }
        // });
        document.getElementById('info-close-button').addEventListener('click', function() {
            document.getElementById('custom-info-window').style.display = 'none';
        });
        

        document.addEventListener('DOMContentLoaded', (event) => {
            const closeButtons = document.querySelectorAll('.close-btn');
            const swiperContainer = document.querySelector('.swiper-container');

            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    swiperContainer.style.display = 'none'; 
                });
            });

            function toggleSwiper() {
                if (swiperContainer.style.display === 'none' || swiperContainer.style.display === '') {
                    swiperContainer.style.display = 'block';  
                    swiper.update();
                    swiper.update();
                } else {
                    swiperContainer.style.display = 'none'; 
                }
            }

            document.getElementById('grid-buttom').addEventListener('click', toggleSwiper);
            // document.getElementById('infoslide-button').addEventListener('click', toggleSwiper);
            document.body.addEventListener('click', function(event) {
                if (event.target.classList.contains('infoBox-button')) {
                    toggleSwiper();
                }
            });
      });
      function toggleScene() {
           
           var iframeContainer = document.createElement('div');
            iframeContainer.style.position = 'fixed';
            iframeContainer.style.top = '0px';
            iframeContainer.style.left = '0px';
            iframeContainer.style.width = '100%';
            iframeContainer.style.height = '100%';
            iframeContainer.style.zIndex = '3000';
            iframeContainer.style.backgroundColor = 'white';

            
            var iframe = document.createElement('iframe');
            iframe.src = 'https://rayasd396kr.github.io/ar/index'; 
            // iframe.src = 'http://127.0.0.1:5501/ar+location/mindar.html'; 
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.border = 'none';
            iframe.allow = 'camera';

           
            var closeButton = document.createElement('button');
            closeButton.textContent = '關閉';
            closeButton.style.position = 'absolute';
            closeButton.style.top = '10px';
            closeButton.style.right = '10px';
            closeButton.style.zIndex = '3001';
            closeButton.onclick = function() {
                document.body.removeChild(iframeContainer);
            };

            
            iframeContainer.appendChild(iframe);
            iframeContainer.appendChild(closeButton);

            
            document.body.appendChild(iframeContainer);
        }

        
        var userLatLng = null;
        map.on('locationfound', function(e) {
            userLatLng = [e.latlng.lat, e.latlng.lng];
            updateInfoWindow(e.latlng);
        });

        

        
        
        let isInfoVisible = true; 

        function toggleinfo1() {
            const infoContainer = document.querySelector('.info-container1');
            const highlightText = document.querySelector('.highlight-text');
            
            if (isInfoVisible) {
                infoContainer.style.display = 'block';
                // highlightText.style.color = 'black';
                
                $(infoContainer).slick('setPosition');
            } else {
                infoContainer.style.display = 'none';
                // highlightText.style.color = 'red';
            }
            
            isInfoVisible = !isInfoVisible;
        }

        var swiper = new Swiper('.swiper-container', {
            effect: 'coverflow',
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: 'auto',
            coverflowEffect: {
            rotate: 50,
            stretch: 0,
            depth: 100,
            modifier: 1,
            slideShadows: true,
            },
            pagination: {
            el: '.swiper-pagination',
            clickable: true,
            },
            
            loop: true,
        });
        
        function jumpToSlide(index) {
            swiper.slideTo(index);
        }
        function toggleGrid() {
            var gridContainer = document.getElementById("grid-container");
            if (gridContainer.style.display === "none") {
                gridContainer.style.display = "grid";
            } else {
                gridContainer.style.display = "none";
            }
        }
        document.addEventListener('DOMContentLoaded', (event) => {
            const okStatus1 = localStorage.getItem('okStatus1');
            const okStatus2 = localStorage.getItem('okStatus2');
                if (okStatus1 === 'true') {
                    document.getElementById('cell-1').innerText = 'OK';
                }
                if (okStatus2 === 'true') {
                    document.getElementById('cell-2').innerText = 'OK';
                }
        });


      
        
        
        function resetLocalStorage() {
            localStorage.removeItem('okStatus1');
            document.getElementById('cell-1').innerText = '1';
            localStorage.removeItem('okStatus2');
            document.getElementById('cell-2').innerText = '2';
        }

        function toggleSearchBox() {
            var searchBox = document.getElementById("searchBox");
            if (searchBox.classList.contains("hidden")) {
                searchBox.classList.remove("hidden");
                searchBox.style.display = "block";
            } else {
                searchBox.classList.add("hidden");
                searchBox.style.display = "none";
            }
        }
        const buildings = [
            { circle: "2", name: "資訊樓", coords: [24.149419286183875, 120.68358285379435] },
            { circle: "1", name: "行政樓", coords: [24.149762346808217, 120.68367584388298] },
            { circle: "3", name: "中正樓", coords: [24.149608553239912, 120.68299603551081] },
            { circle: "", name: "活動中心", coords: [24.149991580599665, 120.6829403899975] },
            { circle: "4", name: "昌明樓", coords: [24.150366961791566, 120.68299206267189] },
            { circle: "5", name: "翰英樓", coords: [24.15124281793564, 120.68292705619912] },
            { circle: "7", name: "中商大樓", coords: [24.151258399379415, 120.68217414104268] },
            { circle: "", name: "宿舍", coords: [24.151830615086253, 120.68329571597918] },
            { circle: "8", name: "奇秀樓", coords: [24.151224781813994, 120.68397935752898] },
            { circle: "6", name: "弘業樓", coords: [24.1505058854478, 120.68404953973737] },
            { circle: "H", name: "中技大樓", coords: [24.152265120366362, 120.68367700979677] }
        ];

        let markers = []; 

        
        function parseInput(input) {
            if (input.length < 4) {
                return null;
            }

            const firstDigit = input[0];
            const floor = input[1];
            const building = buildings.find(b => b.circle === firstDigit);

            if (building) {
                return {
                    buildingName: building.name,
                    floor: floor,
                    id: input,
                    coords: building.coords
                };
            } else {
                return null;
            }
        }

        function clearInput() {
            document.getElementById('searchInput').value = '';
            document.getElementById('buildingName').textContent = "大樓：";
            document.getElementById('floor').textContent = "樓層：";
            document.getElementById('id').textContent = "編號：";
        }

        function addMarkerToMap(coords, buildingName) {
            const marker = L.marker(coords).addTo(map)
                .bindPopup(`<b>${buildingName}</b>`)
                .openPopup();
            markers.push(marker); 
        }

        function deleteMarkers() {
            for (let marker of markers) {
                map.removeLayer(marker); 
            }
            markers = []; 
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                const input = document.getElementById('searchInput').value;
                const result = parseInput(input);
                if (result) {
                    document.getElementById('searchInput').value = '';
                    document.getElementById('buildingName').textContent = `大樓：${result.buildingName}`;
                    document.getElementById('floor').textContent = `樓層：${result.floor}`;
                    document.getElementById('id').textContent = `編號：${result.id}`;
                    
                    addMarkerToMap(result.coords, result.buildingName);
                } else {
                    document.getElementById('searchInput').value = '';
                    document.getElementById('buildingName').textContent = "大樓名稱：";
                    document.getElementById('floor').textContent = "樓層：";
                    document.getElementById('id').textContent = "編號：";
                }
                
            }
        }

        document.getElementById('searchInput').addEventListener('keydown', handleKeyPress);

        function updateContent(buttonType, clickedButton) {

            const searchBox = document.getElementById("searchBox");
            const buttons = document.querySelectorAll('.button-container-search-button');
            
            buttons.forEach(button => {
                button.classList.remove('active');
            });

            clickedButton.classList.add('active');

            document.querySelectorAll('.content-div').forEach(div => {
                div.classList.add('hidden');
            });

            if (buttonType === 'id') {
                document.getElementById('content-id').classList.remove('hidden');

            } else if (buttonType === 'office') {
                document.getElementById('content-office').classList.remove('hidden');
                
                document.getElementById('dropdownMenu-office').dropdownMenu.style.display = 'block'; 
            } else if (buttonType === 'department') {
                document.getElementById('content-department').classList.remove('hidden');
                
            }
        }
        function updateOffice() {
            const dropdownMenu = document.getElementById("dropdownMenu-office");
            const buildingName = document.getElementById("buildingName-office");
            const floor = document.getElementById("floor-office");
            const id = document.getElementById("id-office");

            const selectedValue = dropdownMenu.value;
            let building, coords;

            switch (selectedValue) {
                case "office01":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：3215";
                    building = "中正樓";
                    break;
                case "office02":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：3215";
                    building = "中正樓";
                    break;
                case "office03":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：3212";
                    building = "中正樓";
                    break;
                case "office04":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：3樓";
                    id.textContent = "編號：3314";
                    building = "中正樓";
                    break;
                case "office05":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：3212";
                    building = "中正樓";
                    break;
                case "office06":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：4樓";
                    id.textContent = "編號：3410";
                    building = "中正樓";
                    break;
                case "office07":
                    buildingName.textContent = "大樓：行政樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：1105";
                    building = "行政樓";
                    break;
                case "office08":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：2101";
                    building = "資訊樓";
                    break;
                case "office09":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：2204";
                    building = "資訊樓";
                    break;
                case "office10":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：2203";
                    building = "資訊樓";
                    break;
                case "office11":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：3樓";
                    id.textContent = "編號：2305";
                    building = "資訊樓";
                    break;
                case "office12":
                    buildingName.textContent = "大樓：活動中心";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：";
                    break;
                case "office13":
                    buildingName.textContent = "大樓：活動中心";
                    floor.textContent = "樓層：3樓";
                    id.textContent = "編號：";
                    break;
                case "office14":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4116/4117";
                    building = "昌明樓";
                    break;
                case "office15":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4113A";
                    building = "昌明樓";
                    break;
                case "office16":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4112";
                    building = "昌明樓";
                    break;
                case "office17":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4110/4111";
                    building = "昌明樓";
                    break;
                case "office18":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4107";
                    building = "昌明樓";
                    break;
                case "office19":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：4119";
                    building = "昌明樓";
                    break;
                default:
                    buildingName.textContent = "大樓：";
                    floor.textContent = "樓層：";
                    id.textContent = "編號：";
            }
            const buildingData = buildings.find(b => b.name === building);
            if (buildingData) {
                coords = buildingData.coords;
                addMarkerToMap(coords, buildingName.textContent);
            }

        }


        function updateDepartment() {
            const dropdownMenu = document.getElementById("dropdownMenu-department");
            const buildingName = document.getElementById("buildingName-department");
            const floor = document.getElementById("floor-department");
            const id = document.getElementById("id-department");

            const selectedValue = dropdownMenu.value;
            let building, coords;

            switch (selectedValue) {
                case "department01":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：7201";
                    building = "中商大樓";
                    break;
                case "department02":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：7樓";
                    id.textContent = "編號：3705";
                    building = "中正樓";
                    break;
                case "department03":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：4樓";
                    id.textContent = "編號：7413";
                    building = "中商大樓";
                    break;
                case "department04":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：7樓";
                    id.textContent = "編號：7711";
                    building = "中商大樓";
                    break;
                case "department05":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：8樓";
                    id.textContent = "編號：7810";
                    building = "中商大樓";
                    break;
                case "department06":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：9樓";
                    id.textContent = "編號：7923";
                    building = "中商大樓";
                    break;
                case "department07":
                    buildingName.textContent = "大樓：中技大樓";
                    floor.textContent = "樓層：6樓";
                    id.textContent = "編號：H602";
                    building = "中技大樓";
                    break;
                case "department08":
                    buildingName.textContent = "大樓：中技大樓";
                    floor.textContent = "樓層：4樓";
                    id.textContent = "編號：H414";
                    building = "中技大樓";
                    break;
                case "department09":
                    buildingName.textContent = "大樓：中商大樓";
                    floor.textContent = "樓層：5樓";
                    id.textContent = "編號：7501/7511";
                    building = "中商大樓";
                    break;
                case "department10":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：4213";
                    building = "昌明樓";
                    break;
                case "department11":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：5樓";
                    id.textContent = "編號：4512/4513";
                    building = "昌明樓";
                    break;
                case "department12":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：4樓";
                    id.textContent = "編號：4410";
                    building = "昌明樓";
                    break;
                case "department13":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：3樓";
                    id.textContent = "編號：4310";
                    building = "昌明樓";
                    break;
                case "department14":
                    buildingName.textContent = "大樓：昌明樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：4220";
                    building = "昌明樓";
                    break;
                case "department15":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：8樓";
                    id.textContent = "編號：2805";
                    building = "資訊樓";
                    break;
                case "department16":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：4樓";
                    id.textContent = "編號：2406";
                    building = "資訊樓";
                    break;
                case "department17":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：5樓";
                    id.textContent = "編號：2505";
                    building = "資訊樓";
                    break;
                case "department18":
                    buildingName.textContent = "大樓：弘業樓";
                    floor.textContent = "樓層：2樓";
                    id.textContent = "編號：6201";
                    building = "弘業樓";
                    break;
                case "department19":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：8樓";
                    id.textContent = "編號：2805";
                    building = "資訊樓";
                    break;
                case "department20":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：3樓";
                    id.textContent = "編號：3301";
                    building = "中正樓";
                    break;
                case "department21":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：5樓";
                    id.textContent = "編號：3515";
                    building = "中正樓";
                    break;
                case "department22":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：6樓";
                    id.textContent = "編號：3615";
                    building = "中正樓";
                    break;
                case "department23":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：9樓";
                    id.textContent = "編號：3910";
                    building = "中正樓";
                    break;
                case "department24":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：3104A";
                    building = "中正樓";
                    break;
                case "department25":
                    buildingName.textContent = "大樓：中正樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：3104B";
                    building = "中正樓";
                    break;
                case "department26":
                    buildingName.textContent = "大樓：資訊樓";
                    floor.textContent = "樓層：1樓";
                    id.textContent = "編號：2107";
                    building = "資訊樓";
                    break;
                default:
                    buildingName.textContent = "大樓：";
                    floor.textContent = "樓層：";
                    id.textContent = "編號：";
                    return; 
            }

            const buildingData = buildings.find(b => b.name === building);
            if (buildingData) {
                coords = buildingData.coords;
                addMarkerToMap(coords, buildingName.textContent);
            }
        }
        
        



    </script>
    
</body>
</html>
